<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" version="29.3.6" pages="3">
  <diagram id="flux-notifications" name="Flux Complet">
    <mxGraphModel dx="786" dy="451" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="1200" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="title1" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontStyle=1;fontColor=#1a365d;" value="SYSTÃˆME DE NOTIFICATIONS - FLUX COMPLET" vertex="1">
          <mxGeometry height="40" width="500" x="400" y="20" as="geometry" />
        </mxCell>
        <mxCell id="header-triggers" parent="1" style="text;html=1;strokeColor=none;fillColor=#e2e8f0;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=14;fontStyle=1;fontColor=#2d3748;" value="DÃ‰CLENCHEURS" vertex="1">
          <mxGeometry height="30" width="160" x="520" y="80" as="geometry" />
        </mxCell>
        <mxCell id="scheduler" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fed7aa;strokeColor=#c05621;fontStyle=1;fontSize=12;" value="â° SCHEDULER&#xa;(Cron 9h/jour)" vertex="1">
          <mxGeometry height="60" width="140" x="280" y="130" as="geometry" />
        </mxCell>
        <mxCell id="rest-api" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#bee3f8;strokeColor=#2b6cb0;fontStyle=1;fontSize=12;" value="ðŸŒ REST API&#xa;(POST /create)" vertex="1">
          <mxGeometry height="60" width="140" x="780" y="130" as="geometry" />
        </mxCell>
        <mxCell id="arrow1" edge="1" parent="1" source="scheduler" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#4a5568;" target="notif-service">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow2" edge="1" parent="1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#4a5568;" target="notif-service">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="600" y="190" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="arrow3" edge="1" parent="1" source="rest-api" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#4a5568;" target="notif-service">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="notif-service" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#805ad5;strokeColor=#553c9a;fontColor=#ffffff;fontStyle=1;fontSize=14;" value="NotificationService&#xa;createAndSendNotification()" vertex="1">
          <mxGeometry height="70" width="240" x="480" y="250" as="geometry" />
        </mxCell>
        <mxCell id="postgresql" parent="1" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#faf5ff;strokeColor=#805ad5;fontStyle=1;fontSize=12;" value="ðŸ—„ï¸ PostgreSQL&#xa;(Persistance)" vertex="1">
          <mxGeometry height="80" width="120" x="330" y="380" as="geometry" />
        </mxCell>
        <mxCell id="websocket-server" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fefcbf;strokeColor=#d69e2e;fontStyle=1;fontSize=12;" value="âš¡ WebSocket&#xa;STOMP Broker" vertex="1">
          <mxGeometry height="60" width="140" x="750" y="390" as="geometry" />
        </mxCell>
        <mxCell id="arrow4" edge="1" parent="1" source="notif-service" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#805ad5;fontStyle=1;" target="postgresql" value="1. Save">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow5" edge="1" parent="1" source="notif-service" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#d69e2e;fontStyle=1;" target="websocket-server" value="2. Send">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="topic" parent="1" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fefcbf;strokeColor=#d69e2e;fontStyle=1;fontSize=12;dashed=1;dashPattern=8 8;" value="/topic/notifications/{freelancerId}" vertex="1">
          <mxGeometry height="40" width="240" x="700" y="500" as="geometry" />
        </mxCell>
        <mxCell id="arrow6" edge="1" parent="1" source="websocket-server" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#d69e2e;" target="topic">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="header-frontend" parent="1" style="text;html=1;strokeColor=none;fillColor=#e2e8f0;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=14;fontStyle=1;fontColor=#2d3748;" value="FRONTEND (React)" vertex="1">
          <mxGeometry height="30" width="160" x="520" y="580" as="geometry" />
        </mxCell>
        <mxCell id="ws-service-front" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e9d8fd;strokeColor=#805ad5;fontStyle=1;fontSize=12;" value="websocketService&#xa;(STOMP.js + SockJS)" vertex="1">
          <mxGeometry height="60" width="160" x="720" y="630" as="geometry" />
        </mxCell>
        <mxCell id="arrow7" edge="1" parent="1" source="topic" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#d69e2e;dashed=1;" target="ws-service-front">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="context" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#c6f6d5;strokeColor=#276749;fontStyle=1;fontSize=11;" value="&amp;nbsp;NotificationContext&lt;br&gt;(State Update)" vertex="1">
          <mxGeometry height="50" width="140" x="550" y="750" as="geometry" />
        </mxCell>
        <mxCell id="arrow9" edge="1" parent="1" source="ws-service-front" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#805ad5;" target="context">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="800" y="720" />
              <mxPoint x="620" y="720" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="legend-box" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f7fafc;strokeColor=#a0aec0;strokeWidth=2;" value="" vertex="1">
          <mxGeometry height="200" width="180" x="40" y="130" as="geometry" />
        </mxCell>
        <mxCell id="legend-title" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1;fontColor=#2d3748;" value="LÃ‰GENDE" vertex="1">
          <mxGeometry height="20" width="180" x="40" y="140" as="geometry" />
        </mxCell>
        <mxCell id="legend1" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fed7aa;strokeColor=#c05621;" value="" vertex="1">
          <mxGeometry height="20" width="20" x="55" y="170" as="geometry" />
        </mxCell>
        <mxCell id="legend1-text" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;" value="Scheduler" vertex="1">
          <mxGeometry height="20" width="120" x="85" y="170" as="geometry" />
        </mxCell>
        <mxCell id="legend2" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#c6f6d5;strokeColor=#276749;" value="" vertex="1">
          <mxGeometry height="20" width="20" x="55" y="200" as="geometry" />
        </mxCell>
        <mxCell id="legend2-text" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;" value="Event Listener" vertex="1">
          <mxGeometry height="20" width="120" x="85" y="200" as="geometry" />
        </mxCell>
        <mxCell id="legend3" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#bee3f8;strokeColor=#2b6cb0;" value="" vertex="1">
          <mxGeometry height="20" width="20" x="55" y="230" as="geometry" />
        </mxCell>
        <mxCell id="legend3-text" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;" value="REST API" vertex="1">
          <mxGeometry height="20" width="120" x="85" y="230" as="geometry" />
        </mxCell>
        <mxCell id="legend4" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#805ad5;strokeColor=#553c9a;" value="" vertex="1">
          <mxGeometry height="20" width="20" x="55" y="260" as="geometry" />
        </mxCell>
        <mxCell id="legend4-text" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;" value="Service Backend" vertex="1">
          <mxGeometry height="20" width="120" x="85" y="260" as="geometry" />
        </mxCell>
        <mxCell id="legend5" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fefcbf;strokeColor=#d69e2e;" value="" vertex="1">
          <mxGeometry height="20" width="20" x="55" y="290" as="geometry" />
        </mxCell>
        <mxCell id="legend5-text" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;" value="WebSocket" vertex="1">
          <mxGeometry height="20" width="120" x="85" y="290" as="geometry" />
        </mxCell>
        <mxCell id="separator" edge="1" parent="1" style="endArrow=none;dashed=1;html=1;dashPattern=8 8;strokeWidth=2;strokeColor=#a0aec0;" value="">
          <mxGeometry height="50" relative="1" width="50" as="geometry">
            <mxPoint x="260" y="560" as="sourcePoint" />
            <mxPoint x="960" y="560" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="backend-label" parent="1" style="text;html=1;strokeColor=none;fillColor=#805ad5;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=12;fontStyle=1;fontColor=#ffffff;" value="BACKEND (Spring Boot)" vertex="1">
          <mxGeometry height="30" width="170" x="40" y="380" as="geometry" />
        </mxCell>
        <mxCell id="frontend-label" parent="1" style="text;html=1;strokeColor=none;fillColor=#3182ce;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=12;fontStyle=1;fontColor=#ffffff;" value="FRONTEND (React)" vertex="1">
          <mxGeometry height="30" width="170" x="40" y="680" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="communication" name="Communication Front-Back">
    <mxGraphModel dx="1200" dy="800" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1200" pageHeight="800" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <!-- Titre -->
        <mxCell id="title2" value="COMMUNICATION FRONTEND - BACKEND" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=22;fontStyle=1;fontColor=#1a365d;" vertex="1" parent="1">
          <mxGeometry x="300" y="20" width="400" height="40" as="geometry" />
        </mxCell>
        <!-- ========== FRONTEND BOX ========== -->
        <mxCell id="frontend-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ebf8ff;strokeColor=#3182ce;strokeWidth=3;" vertex="1" parent="1">
          <mxGeometry x="80" y="100" width="300" height="400" as="geometry" />
        </mxCell>
        <mxCell id="frontend-title" value="FRONTEND (React)" style="text;html=1;strokeColor=none;fillColor=#3182ce;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=16;fontStyle=1;fontColor=#ffffff;" vertex="1" parent="1">
          <mxGeometry x="130" y="115" width="200" height="35" as="geometry" />
        </mxCell>
        <!-- Frontend Components -->
        <mxCell id="axios" value="axios&#xa;(HTTP Client)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#bee3f8;strokeColor=#2b6cb0;fontStyle=1;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="120" y="180" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="stomp" value="STOMP.js&#xa;+ SockJS" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fefcbf;strokeColor=#d69e2e;fontStyle=1;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="240" y="180" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="notif-service-front" value="notificationService.ts" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e9d8fd;strokeColor=#805ad5;fontStyle=1;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="120" y="260" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ws-service" value="websocketService.ts" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e9d8fd;strokeColor=#805ad5;fontStyle=1;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="240" y="260" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="notif-context" value="NotificationContext.tsx" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#c6f6d5;strokeColor=#276749;fontStyle=1;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="160" y="330" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ui-bell" value="NotificationBell" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fed7e2;strokeColor=#c53030;fontStyle=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="110" y="400" width="90" height="35" as="geometry" />
        </mxCell>
        <mxCell id="ui-panel" value="NotificationPanel" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fed7e2;strokeColor=#c53030;fontStyle=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="210" y="400" width="90" height="35" as="geometry" />
        </mxCell>
        <mxCell id="ui-item" value="NotificationItem" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fed7e2;strokeColor=#c53030;fontStyle=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="310" y="400" width="90" height="35" as="geometry" />
        </mxCell>
        <!-- ========== BACKEND BOX ========== -->
        <mxCell id="backend-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#faf5ff;strokeColor=#805ad5;strokeWidth=3;" vertex="1" parent="1">
          <mxGeometry x="620" y="100" width="300" height="400" as="geometry" />
        </mxCell>
        <mxCell id="backend-title" value="BACKEND (Spring Boot)" style="text;html=1;strokeColor=none;fillColor=#805ad5;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=16;fontStyle=1;fontColor=#ffffff;" vertex="1" parent="1">
          <mxGeometry x="670" y="115" width="200" height="35" as="geometry" />
        </mxCell>
        <!-- Backend Components -->
        <mxCell id="controller" value="NotificationController&#xa;(@RestController)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#bee3f8;strokeColor=#2b6cb0;fontStyle=1;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="660" y="180" width="130" height="50" as="geometry" />
        </mxCell>
        <mxCell id="websocket-config" value="WebSocketConfig&#xa;(STOMP Broker)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fefcbf;strokeColor=#d69e2e;fontStyle=1;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="810" y="180" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="notif-service-back" value="NotificationService" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e9d8fd;strokeColor=#805ad5;fontStyle=1;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="720" y="270" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="repository" value="NotificationRepository" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#c6f6d5;strokeColor=#276749;fontStyle=1;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="720" y="340" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="database" value="ðŸ—„ï¸ PostgreSQL" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=10;fillColor=#e2e8f0;strokeColor=#4a5568;fontStyle=1;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="730" y="410" width="100" height="60" as="geometry" />
        </mxCell>
        <!-- ========== FLÃˆCHES DE COMMUNICATION ========== -->
        <!-- REST API Arrow -->
        <mxCell id="rest-arrow" value="" style="shape=flexArrow;endArrow=classic;startArrow=classic;html=1;fillColor=#3182ce;strokeColor=#2c5282;width=16;endSize=6;startSize=6;" edge="1" parent="1">
          <mxGeometry width="100" height="100" relative="1" as="geometry">
            <mxPoint x="380" y="205" as="sourcePoint" />
            <mxPoint x="620" y="205" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="rest-label" value="REST API (HTTP)&#xa;GET, PUT, POST" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontStyle=1;fontColor=#2c5282;" vertex="1" parent="1">
          <mxGeometry x="440" y="170" width="100" height="40" as="geometry" />
        </mxCell>
        <!-- WebSocket Arrow -->
        <mxCell id="ws-arrow" value="" style="shape=flexArrow;endArrow=classic;html=1;fillColor=#d69e2e;strokeColor=#b7791f;width=16;endSize=6;" edge="1" parent="1">
          <mxGeometry width="100" height="100" relative="1" as="geometry">
            <mxPoint x="620" y="285" as="sourcePoint" />
            <mxPoint x="380" y="285" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ws-label" value="WebSocket (STOMP)&#xa;Push temps rÃ©el" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontStyle=1;fontColor=#b7791f;" vertex="1" parent="1">
          <mxGeometry x="440" y="260" width="100" height="40" as="geometry" />
        </mxCell>
        <!-- ========== LÃ‰GENDE EN BAS ========== -->
        <mxCell id="legend-box2" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f7fafc;strokeColor=#a0aec0;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="80" y="530" width="840" height="80" as="geometry" />
        </mxCell>
        <mxCell id="legend-rest" value="REST API" style="shape=flexArrow;endArrow=classic;startArrow=classic;html=1;fillColor=#3182ce;strokeColor=#2c5282;width=10;endSize=4;startSize=4;" vertex="1" parent="1">
          <mxGeometry x="110" y="555" width="80" height="30" as="geometry">
            <mxPoint x="110" y="570" as="sourcePoint" />
            <mxPoint x="190" y="570" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="legend-rest-text" value="RequÃªtes HTTP bidirectionnelles&#xa;(GET notifications, PUT mark as read)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="200" y="550" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="legend-ws" value="WebSocket" style="shape=flexArrow;endArrow=classic;html=1;fillColor=#d69e2e;strokeColor=#b7791f;width=10;endSize=4;" vertex="1" parent="1">
          <mxGeometry x="500" y="555" width="80" height="30" as="geometry">
            <mxPoint x="580" y="570" as="sourcePoint" />
            <mxPoint x="500" y="570" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="legend-ws-text" value="Push serveur vers client&#xa;(Notifications en temps rÃ©el)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="590" y="550" width="200" height="40" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="sequence" name="SÃ©quence WebSocket">
    <mxGraphModel dx="1200" dy="800" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1000" pageHeight="700" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <!-- Titre -->
        <mxCell id="title3" value="DIAGRAMME DE SÃ‰QUENCE - CONNEXION WEBSOCKET" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;fontStyle=1;fontColor=#1a365d;" vertex="1" parent="1">
          <mxGeometry x="200" y="20" width="500" height="40" as="geometry" />
        </mxCell>
        <!-- Acteurs -->
        <mxCell id="client-box" value="Client&#xa;(React)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#3182ce;strokeColor=#2c5282;fontColor=#ffffff;fontStyle=1;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="120" y="80" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="sockjs-box" value="SockJS" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d69e2e;strokeColor=#b7791f;fontColor=#ffffff;fontStyle=1;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="370" y="80" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="server-box" value="Server&#xa;(Spring)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#805ad5;strokeColor=#553c9a;fontColor=#ffffff;fontStyle=1;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="620" y="80" width="100" height="50" as="geometry" />
        </mxCell>
        <!-- Lignes de vie -->
        <mxCell id="client-line" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 4;strokeWidth=2;strokeColor=#3182ce;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="170" y="130" as="sourcePoint" />
            <mxPoint x="170" y="600" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="sockjs-line" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 4;strokeWidth=2;strokeColor=#d69e2e;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="420" y="130" as="sourcePoint" />
            <mxPoint x="420" y="600" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="server-line" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 4;strokeWidth=2;strokeColor=#805ad5;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="670" y="130" as="sourcePoint" />
            <mxPoint x="670" y="600" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <!-- Messages -->
        <!-- 1. new SockJS -->
        <mxCell id="msg1" value="1. new SockJS(/ws)" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#2d3748;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="170" y="170" as="sourcePoint" />
            <mxPoint x="420" y="170" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <!-- 2. HTTP Upgrade -->
        <mxCell id="msg2" value="2. HTTP Upgrade Request" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#2d3748;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="420" y="210" as="sourcePoint" />
            <mxPoint x="670" y="210" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <!-- 3. Connection OK -->
        <mxCell id="msg3" value="3. Connection OK" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#38a169;dashed=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="670" y="250" as="sourcePoint" />
            <mxPoint x="420" y="250" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <!-- 4. STOMP CONNECT -->
        <mxCell id="msg4" value="4. STOMP CONNECT" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#2d3748;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="170" y="300" as="sourcePoint" />
            <mxPoint x="670" y="300" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <!-- 5. STOMP CONNECTED -->
        <mxCell id="msg5" value="5. STOMP CONNECTED" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#38a169;dashed=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="670" y="340" as="sourcePoint" />
            <mxPoint x="170" y="340" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <!-- 6. SUBSCRIBE -->
        <mxCell id="msg6" value="6. SUBSCRIBE /topic/notifications/{id}" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#2d3748;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="170" y="390" as="sourcePoint" />
            <mxPoint x="670" y="390" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <!-- Temps passe -->
        <mxCell id="time-box" value="... temps passe ..." style="text;html=1;strokeColor=#a0aec0;fillColor=#f7fafc;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=12;fontStyle=2;fontColor=#718096;" vertex="1" parent="1">
          <mxGeometry x="350" y="430" width="140" height="30" as="geometry" />
        </mxCell>
        <!-- 7. MESSAGE -->
        <mxCell id="msg7" value="7. MESSAGE {notification JSON}" style="endArrow=classic;html=1;strokeWidth=3;strokeColor=#e53e3e;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="670" y="490" as="sourcePoint" />
            <mxPoint x="170" y="490" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <!-- 8. Another MESSAGE -->
        <mxCell id="msg8" value="8. MESSAGE {notification JSON}" style="endArrow=classic;html=1;strokeWidth=3;strokeColor=#e53e3e;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="670" y="540" as="sourcePoint" />
            <mxPoint x="170" y="540" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <!-- Notes -->
        <mxCell id="note1" value="Push automatique&#xa;(pas de requÃªte client)" style="shape=note;whiteSpace=wrap;html=1;backgroundOutline=1;fillColor=#fed7e2;strokeColor=#c53030;fontStyle=1;fontSize=10;align=left;spacingLeft=5;" vertex="1" parent="1">
          <mxGeometry x="750" y="480" width="130" height="50" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
